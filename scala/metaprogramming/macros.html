<!DOCTYPE html>
<html lang="ru">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Laika 0.19.0 + Helium Theme" />
  <title>Макросы</title>
  
  <meta name="author" content="Artem Korsakov"/>
  
  <meta name="author" content="Artem Korsakov"/>
  
  <meta name="author" content="Artem Korsakov"/>
  
  
  <meta name="description" content="Функциональная разработка на Scala"/>
  
  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.207/distr/fira_code.css">
  
  <link rel="stylesheet" type="text/css" href="../../helium/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/laika-helium.css" />
  <script src="../../helium/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="icon-link glyph-link" href="../../"><i class="icofont-laika home" title="Home">&#xef47;</i></a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://github.com/artemkorsakov/scalabook"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="button-link" href="https://scalabook.gitflic.space">Scalabook на gitflic</a>
    
    <a class="button-link" href="https://github.com/artemkorsakov/scalabook">Github</a>
    
    <a class="button-link" href="https://gitflic.ru/project/artemkorsakov/scalabook">Gitflic</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://github.com/artemkorsakov/scalabook"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
    <a class="button-link" href="https://scalabook.gitflic.space">Scalabook на gitflic</a>
    
    <a class="button-link" href="https://github.com/artemkorsakov/scalabook">Github</a>
    
    <a class="button-link" href="https://gitflic.ru/project/artemkorsakov/scalabook">Gitflic</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../">Домашняя</a></li>
    <li class="level1 nav-header">Блог</li>
    <li class="level2 nav-leaf"><a href="../../blog/architecture-problems.html">Ошибки при наследовании</a></li>
    <li class="level2 nav-leaf"><a href="../../blog/decomposition.html">Декомпозиция в Scala 3</a></li>
    <li class="level2 nav-leaf"><a href="../../blog/builder-pattern.html">Шаблон Строитель в Scala 3</a></li>
    <li class="level1 nav-header">Scala</li>
    <li class="level2 nav-leaf"><a href="../">Обзор Scala</a></li>
    <li class="level2 nav-leaf"><a href="../getting-started.html">С чего начать?</a></li>
    <li class="level2 nav-leaf"><a href="../hello_world.html">Hello, world!</a></li>
    <li class="level2 nav-leaf"><a href="../repl.html">REPL</a></li>
    <li class="level2 nav-leaf"><a href="../types.html">Типы данных</a></li>
    <li class="level2 nav-leaf"><a href="../structures.html">Структуры управления</a></li>
    <li class="level2 nav-header">Структуры управления</li>
    <li class="level3 nav-leaf"><a href="../structures/ifelse.html">if/else</a></li>
    <li class="level3 nav-leaf"><a href="../structures/for.html">for</a></li>
    <li class="level3 nav-leaf"><a href="../structures/match.html">match expressions</a></li>
    <li class="level3 nav-leaf"><a href="../structures/others.html">while and try</a></li>
    <li class="level2 nav-leaf"><a href="../modeling.html">Моделирование данных</a></li>
    <li class="level2 nav-header">Моделирование данных</li>
    <li class="level3 nav-leaf"><a href="../modeling/classes.html">Классы</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/objects.html">Объекты</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/companion-objects.html">Сопутствующие объекты</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/traits.html">Трейты</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/abstract-class.html">Абстрактные классы</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/enums.html">Перечисления</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/case-class.html">Кейс классы и объекты</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/oop.html">Моделирование ООП</a></li>
    <li class="level3 nav-leaf"><a href="../modeling/fp.html">Моделирование ФП</a></li>
    <li class="level2 nav-leaf"><a href="../methods.html">Методы</a></li>
    <li class="level2 nav-header">Методы</li>
    <li class="level3 nav-leaf"><a href="../methods/method-features.html">Определение методов</a></li>
    <li class="level3 nav-leaf"><a href="../methods/default-parameters.html">Параметры по умолчанию</a></li>
    <li class="level3 nav-leaf"><a href="../methods/named-parameters.html">Именованные параметры</a></li>
    <li class="level3 nav-leaf"><a href="../methods/by-name-parameter.html">Параметры по имени</a></li>
    <li class="level3 nav-leaf"><a href="../methods/partially-applied-functions.html">Каррирование</a></li>
    <li class="level3 nav-leaf"><a href="../methods/vararg-parameters.html">Методы с неопределенным количеством параметров</a></li>
    <li class="level3 nav-leaf"><a href="../methods/generic-parameter.html">Generic параметры</a></li>
    <li class="level3 nav-leaf"><a href="../methods/extension-methods.html">Методы расширения</a></li>
    <li class="level3 nav-leaf"><a href="../methods/main-methods.html">main методы</a></li>
    <li class="level2 nav-leaf"><a href="../functions.html">Функции</a></li>
    <li class="level2 nav-header">Функции</li>
    <li class="level3 nav-leaf"><a href="../functions/anonymous.html">Анонимные функции</a></li>
    <li class="level3 nav-leaf"><a href="../functions/variables.html">Параметры функции</a></li>
    <li class="level3 nav-leaf"><a href="../functions/eta.html">Eta расширение</a></li>
    <li class="level3 nav-leaf"><a href="../functions/hofs.html">Функции высшего порядка</a></li>
    <li class="level3 nav-leaf"><a href="../functions/write-map.html">Написание своего собственного метода map</a></li>
    <li class="level3 nav-leaf"><a href="../functions/returns-function.html">Возврат функции в методе</a></li>
    <li class="level2 nav-leaf"><a href="../packaging.html">Пакеты и импорт</a></li>
    <li class="level2 nav-leaf"><a href="../toplevel-definitions.html">Верхнеуровневые определения</a></li>
    <li class="level2 nav-leaf"><a href="../collections.html">Коллекции</a></li>
    <li class="level2 nav-header">Коллекции</li>
    <li class="level3 nav-leaf"><a href="../collections/classes.html">Типы коллекций</a></li>
    <li class="level3 nav-leaf"><a href="../collections/list.html">List</a></li>
    <li class="level3 nav-leaf"><a href="../collections/lazylist.html">LazyList</a></li>
    <li class="level3 nav-leaf"><a href="../collections/array-seq.html">ArraySeq</a></li>
    <li class="level3 nav-leaf"><a href="../collections/vector.html">Vector</a></li>
    <li class="level3 nav-leaf"><a href="../collections/array-buffer.html">ArrayBuffer</a></li>
    <li class="level3 nav-leaf"><a href="../collections/maps.html">Maps</a></li>
    <li class="level3 nav-leaf"><a href="../collections/set.html">Работа с множествами</a></li>
    <li class="level3 nav-leaf"><a href="../collections/range.html">Диапазон (Range)</a></li>
    <li class="level3 nav-leaf"><a href="../collections/tuple.html">Tuple (кортежи)</a></li>
    <li class="level3 nav-leaf"><a href="../collections/queue.html">Queue</a></li>
    <li class="level3 nav-leaf"><a href="../collections/methods.html">Методы в коллекциях</a></li>
    <li class="level2 nav-leaf"><a href="../fp.html">Функциональное программирование</a></li>
    <li class="level2 nav-header">ФП</li>
    <li class="level3 nav-leaf"><a href="../fp/what-is-fp.html">Что такое функциональное программирование?</a></li>
    <li class="level3 nav-leaf"><a href="../fp/immutable-values.html">Неизменяемые значения</a></li>
    <li class="level3 nav-leaf"><a href="../fp/pure-functions.html">Чистые функции</a></li>
    <li class="level3 nav-leaf"><a href="../fp/functions-are-values.html">Функции - это значения</a></li>
    <li class="level3 nav-leaf"><a href="../fp/functional-error-handling.html">Функциональная обработка ошибок</a></li>
    <li class="level2 nav-leaf"><a href="../type-system.html">Система типов</a></li>
    <li class="level2 nav-header">Система типов</li>
    <li class="level3 nav-leaf"><a href="../type-system/types-inferred.html">Определение типов</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-generics.html">Generics типы</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/upper-type-bounds.html">Верхнее ограничение типа</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/lower-type-bounds.html">Нижнее ограничение типа</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-intersection.html">Пересечение типов</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-union.html">Объединение типов</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-adts.html">Алгебраические типы данных (ADT)</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-variance.html">Ковариантность типов</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-opaque.html">Непрозрачные типы</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-structural.html">Структурные типы</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-dependent-function.html">Зависимые типы функций</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/type-lambdas.html">Лямбда-типы</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/match-types.html">Типы match</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/polymorphic-function-types.html">Полиморфные типы функций</a></li>
    <li class="level3 nav-leaf"><a href="../type-system/types-others.html">Другие типы</a></li>
    <li class="level2 nav-leaf"><a href="../abstractions.html">Контекстуальные абстракции</a></li>
    <li class="level2 nav-header">Абстракции</li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-given.html">Экземпляры given</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-using.html">Предложения using</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/type-classes.html">Класс типов</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-context-bounds.html">Контекстные границы</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-given-imports.html">Given imports</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-extension-methods.html">Методы расширения - детали</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-type-classes.html">Имплементация type классов</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-type-class-derivation.html">Type Class Derivation</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-multiversal-equality.html">Многостороннее равенство</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/context-functions.html">Контекстные функции</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-implicit-conversions.html">Неявные преобразования типов</a></li>
    <li class="level3 nav-leaf"><a href="../abstractions/ca-by-name-parameters.html">Контекстные параметры по имени</a></li>
    <li class="level2 nav-leaf"><a href="../details.html">Детали</a></li>
    <li class="level2 nav-header">Детали</li>
    <li class="level3 nav-leaf"><a href="../details/export-causes.html">Предложения export</a></li>
    <li class="level3 nav-leaf"><a href="../details/parameter-untupling.html">Распаковка параметров</a></li>
    <li class="level3 nav-leaf"><a href="../details/type-test.html">Проверка типа</a></li>
    <li class="level3 nav-leaf"><a href="../details/pattern-matching.html">Сопоставление с образцом</a></li>
    <li class="level2 nav-leaf"><a href="../concurrency.html">Параллелизм</a></li>
    <li class="level2 nav-leaf"><a href="../tools.html">Утилиты</a></li>
    <li class="level2 nav-header">Утилиты</li>
    <li class="level3 nav-leaf"><a href="../tools/tools-sbt.html">Сборка и тестирование проектов Scala с помощью Sbt</a></li>
    <li class="level3 nav-leaf"><a href="../tools/tools-worksheets.html">Worksheet</a></li>
    <li class="level2 nav-leaf"><a href="../with_java.html">Взаимодействие с Java</a></li>
    <li class="level2 nav-leaf"><a href="../metaprogramming.html">Метапрограммирование</a></li>
    <li class="level2 nav-header">Metaprogramming</li>
    <li class="level3 nav-leaf"><a href="inline.html">Inline</a></li>
    <li class="level3 nav-leaf"><a href="compile-time-ops.html">Операции во время компиляции</a></li>
    <li class="level3 active nav-leaf"><a href="#">Макросы</a></li>
    <li class="level3 nav-leaf"><a href="quoted-code.html">Quoted Code</a></li>
    <li class="level3 nav-leaf"><a href="runtime-staging.html">Runtime Staging</a></li>
    <li class="level3 nav-leaf"><a href="reflection.html">Reflection</a></li>
    <li class="level3 nav-leaf"><a href="tasty-inspection.html">TASTy Inspection</a></li>
    <li class="level2 nav-leaf"><a href="../soft-keywords.html">Soft Keywords</a></li>
    <li class="level2 nav-leaf"><a href="../scaladoc.html">Scaladoc</a></li>
    <li class="level2 nav-header">Scaladoc</li>
    <li class="level3 nav-leaf"><a href="../scaladoc/docstrings.html">Документы</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/linking.html">Связующая документация</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/static-site.html">Статическая документация</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/blog.html">Встроенный блог</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/site-versioning.html">Версионность сайта</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/search-engine.html">Поиск по типу</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/snippet-compiler.html">Проверка фрагмента</a></li>
    <li class="level3 nav-leaf"><a href="../scaladoc/settings.html">Настройки</a></li>
    <li class="level1 nav-header">Функциональное программирование</li>
    <li class="level2 nav-leaf"><a href="../../fp/">Функциональное программирование</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/data-structures.html">Функциональная структура данных</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/handling-errors.html">Обработка ошибок</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/laziness.html">Ленивые вычисления</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/state.html">Функциональное состояние</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/monoids.html">Monoids</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/monads.html">Monads</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/writer.html">Функциональный журнал</a></li>
    <li class="level2 nav-leaf"><a href="../../fp/non-empty-list.html">Непустой связанный список</a></li>
    <li class="level1 nav-header">Теория категорий</li>
    <li class="level2 nav-leaf"><a href="../../typeclass/">Теория категорий</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/equal.html">Группа Equal</a></li>
    <li class="level2 nav-header">Группа Equal</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/equal/equal.html">Equal</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/equal/order.html">Order</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/equal/enum.html">Enum</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/equal/bounded.html">Bounded</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/monoid.html">Группа Monoid</a></li>
    <li class="level2 nav-header">Группа Monoid</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monoid/semigroup.html">Semigroup</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monoid/monoid.html">Monoid</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monoid/band.html">Band</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monoid/idempotent-monoid.html">Idempotent Monoid</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monoid/group.html">Group</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/monad.html">Группа Monad</a></li>
    <li class="level2 nav-header">Группа Monad</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/invariant-functor.html">Invariant Functor</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/functor.html">Functor</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/invariant-applicative.html">Invariant Applicative</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/semigroupal.html">Semigroupal</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/apply.html">Apply</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/applicative.html">Applicative</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/bind.html">Bind</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/monad.html">Monad</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/plus.html">Plus</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/plus-empty.html">PlusEmpty</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/applicative-plus.html">ApplicativePlus</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/monad-plus.html">MonadPlus</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/is-empty.html">IsEmpty</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/foldable.html">Foldable</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/traverse.html">Traverse</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/contravariant-functor.html">Контравариантный функтор</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/divide.html">Divide</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/divisible.html">Divisible</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/co-bind.html">CoBind</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/co-monads.html">Co-Monad</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/monad-transformer.html">Monad Transformer</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/monad/free-monads.html">Free Monad</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/arrow.html">Группа Arrow</a></li>
    <li class="level2 nav-header">Группа Arrow</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/compose.html">Compose</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/category.html">Category</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/split.html">Split</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/profunctor.html">Profunctor</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/strong.html">Strong</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/arrow/arrow.html">Arrow</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/bifunctor.html">Группа Bifunctor</a></li>
    <li class="level2 nav-header">Группа Bifunctor</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/bifunctor/bifunctor.html">Bifunctor</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/bifunctor/bifoldable.html">Bifoldable</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/bifunctor/bitraverse.html">Bitraverse</a></li>
    <li class="level2 nav-leaf"><a href="../../typeclass/other.html">Вне группы</a></li>
    <li class="level2 nav-header">Вне группы</li>
    <li class="level3 nav-leaf"><a href="../../typeclass/other/show.html">Show</a></li>
    <li class="level3 nav-leaf"><a href="../../typeclass/other/read.html">Read</a></li>
    <li class="level1 nav-header">Алгоритмы и структуры</li>
    <li class="level2 nav-leaf"><a href="../../algorithms/">Структуры данных и алгоритмы</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/fundamental.html">Фундаментальные алгоритмы</a></li>
    <li class="level2 nav-header">Фундаментальные алгоритмы</li>
    <li class="level3 nav-leaf"><a href="../../algorithms/fundamental/numerical.html">Численные алгоритмы</a></li>
    <li class="level3 nav-leaf"><a href="../../algorithms/fundamental/primes.html">Простые числа</a></li>
    <li class="level3 nav-leaf"><a href="../../algorithms/fundamental/fibonacci.html">Числа Фибоначчи</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/lists.html">Связанные списки</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/arrays.html">Массивы</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/stacks.html">Стеки</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/queues.html">Очереди</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/trees.html">Деревья</a></li>
    <li class="level2 nav-header">Двоичное дерево</li>
    <li class="level3 nav-leaf"><a href="../../algorithms/trees/binary-tree.html">Двоичное дерево</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/hash-tables.html">Хеш-таблицы</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/sort.html">Сортировка</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/search.html">Поиск</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/graphs.html">Графы</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/ackermann.html">Функция Аккермана</a></li>
    <li class="level2 nav-leaf"><a href="../../algorithms/newton.html">Метод Ньютона</a></li>
    <li class="level1 nav-header">Scala библиотеки</li>
    <li class="level2 nav-leaf"><a href="../../libs/">Scala библиотеки</a></li>
    <li class="level2 nav-leaf"><a href="../../libs/refined.html">Уточняющие типы в Scala</a></li>
    <li class="level2 nav-leaf"><a href="../../libs/cats-effect.html">Cats effect</a></li>
    <li class="level2 nav-header">Cats effect</li>
    <li class="level3 nav-leaf"><a href="../../libs/cats-effect/copy-files.html">Копирование файлов</a></li>
    <li class="level3 nav-leaf"><a href="../../libs/cats-effect/producer-consumer-problem.html">Проблема производитель-потребитель — параллелизм и волокна</a></li>
    <li class="level2 nav-leaf"><a href="../../libs/http4s.html">Http4s</a></li>
    <li class="level1 nav-header">Паттерны проектирования</li>
    <li class="level2 nav-leaf"><a href="../../patterns/">Паттерны проектирования</a></li>
    <li class="level2 nav-leaf"><a href="../../patterns/creational.html">Порождающие шаблоны</a></li>
    <li class="level2 nav-header">Порождающие шаблоны</li>
    <li class="level3 nav-leaf"><a href="../../patterns/creational/factory-method.html">Фабричный метод</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/creational/abstract-factory.html">Абстрактная фабрика</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/creational/builder.html">Строитель</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/creational/prototype.html">Прототип</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/creational/singleton.html">Одиночка</a></li>
    <li class="level2 nav-leaf"><a href="../../patterns/structural.html">Структурные шаблоны</a></li>
    <li class="level2 nav-header">Структурные шаблоны</li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/adapter.html">Адаптер</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/bridge.html">Мост</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/composite.html">Компоновщик</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/decorator.html">Декоратор</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/facade.html">Фасад</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/flyweight.html">Приспособленец</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/structural/proxy.html">Заместитель</a></li>
    <li class="level2 nav-leaf"><a href="../../patterns/behavioral.html">Поведенческие шаблоны</a></li>
    <li class="level2 nav-header">Поведенческие шаблоны</li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/interpreter.html">Интерпретатор</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/template-method.html">Шаблонный метод</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/chain-of-responsibility.html">Цепочка обязанностей</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/command.html">Команда</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/iterator.html">Итератор</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/mediator.html">Посредник</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/memento.html">Хранитель</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/observer.html">Наблюдатель</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/state.html">Состояние</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/strategy.html">Стратегия</a></li>
    <li class="level3 nav-leaf"><a href="../../patterns/behavioral/visitor.html">Посетитель</a></li>
    <li class="level1 nav-header">Упражнения из книг</li>
    <li class="level2 nav-leaf"><a href="../../books/">Упражнения из книг</a></li>
    <li class="level2 nav-header">Structure and Interpretation</li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/">Структура и интерпретация компьютерных программ</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_1_6.html">Глава 1.1.6</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_1_7.html">Глава 1.1.7</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_1_8.html">Глава 1.1.8</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_1.html">Глава 1.2.1</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_2.html">Глава 1.2.2</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_3.html">Глава 1.2.3</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_4.html">Глава 1.2.4</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_5.html">Глава 1.2.5</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_2_6.html">Глава 1.2.6</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_3_1.html">Глава 1.3.1</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_3_2.html">Глава 1.3.2</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_3_3.html">Глава 1.3.3</a></li>
    <li class="level3 nav-leaf"><a href="../../books/sicp/chapter1_3_4.html">Глава 1.3.4</a></li>
    <li class="level2 nav-header">Scala Puzzlers</li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/">Головоломки на Scala</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/hi-there.html">Hi There!</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/upstairs.html">UPSTAIRS downstairs</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/location.html">Location, Location, Location</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/now-you-see-me.html">Now You See Me, Now You Don&#39;t</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/the-missing-list.html">The Missing List</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/arg-arrgh.html">Arg Arrgh!</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/captured-by-closures.html">Captured by Closures</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/map-comprehension.html">Map Comprehension</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/init-you-init-me.html">Init You, Init Me</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/a-case-of-equality.html">A Case of Equality</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/if-at-first.html">If At First You Don&#39;t Succeed...</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/to-map-or-not-to-map.html">To Map, or Not to Map</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/private-lives.html">Private Lives</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/self-see-self.html">Self - See &#39;Self&#39;</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/one-egg-or-two.html">One Egg or Two..?</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/return-to-me.html">Return to Me!</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/implicitly-surprising.html">Implicitly Surprising</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/one-bound-two-to-go.html">One Bound, Two to Go</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/count-me-now-count-me-later.html">Count Me Now, Count Me Later</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/whats-in-a-name.html">What&#39;s in a Name?</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/i-can-has-padding.html">I Can Has Padding?</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/cast-away.html">Cast Away</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/pick-an-int-any-int.html">Pick an Int, Any Int!</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/a-case-of-string.html">A Case of Strings</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/a-view-to-a-shill.html">A View to a Shill</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/accepts-any-args.html">Accepts Any Args</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/the-devil-is-in-the-defaults.html">The Devil is in the Defaults</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/one-two-skip-a-few.html">One, Two, Skip a Few</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/oddly-enough.html">Oddly Enough</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/splitting-headache.html">Splitting Headache</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/a-result-finally.html">A Result, Finally!</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/heads-you-win.html">Heads You Win...</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/ex-stream-surprise.html">(Ex)Stream Surprise</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/a-matter-of-context.html">A Matter of Context</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/inference.html">Inference Hindrance</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/for-each-step.html">For Each Step...</a></li>
    <li class="level3 nav-leaf"><a href="../../books/puzzlers/beep-beep-reversing.html">Beep Beep...Reversing</a></li>
    <li class="level1 nav-leaf"><a href="../../extra.html">Дополнительные материалы</a></li>
    <li class="level1 nav-header">Дополнительные материалы</li>
    <li class="level2 nav-leaf"><a href="../../extra/one_star.html">✯</a></li>
    <li class="level2 nav-leaf"><a href="../../extra/two_stars.html">✯✯</a></li>
    <li class="level2 nav-leaf"><a href="../../extra/three_stars.html">✯✯✯</a></li>
    <li class="level2 nav-leaf"><a href="../../extra/four_stars.html">✯✯✯✯</a></li>
    <li class="level2 nav-leaf"><a href="../../extra/five_stars.html">✯✯✯✯✯</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Макросы</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#макросы-рассматривают-программы-как-значения">Макросы рассматривают программы как значения</a></li>
    <li class="level2 nav-leaf"><a href="#макросы-и-параметры-типа">Макросы и параметры типа</a></li>
    <li class="level2 nav-leaf"><a href="#определение-и-использование-макросов">Определение и использование макросов</a></li>
    <li class="level2 nav-leaf"><a href="#пример-статическая-оценка-power-с-помощью-макросов">Пример: статическая оценка <code>power</code> с помощью макросов</a></li>
    <li class="level1 nav-node"><a href="#простые-выражения">Простые выражения</a></li>
    <li class="level2 nav-leaf"><a href="#создание-выражений-из-значений">Создание выражений из значений</a></li>
    <li class="level2 nav-leaf"><a href="#извлечение-значений-из-выражений">Извлечение значений из выражений</a></li>
    <li class="level2 nav-leaf"><a href="#отображение-выражений">Отображение выражений</a></li>
    <li class="level2 nav-leaf"><a href="#работа-с-переменными-аргументами">Работа с переменными аргументами</a></li>
    <li class="level1 nav-node"><a href="#сложные-выражения">Сложные выражения</a></li>
    <li class="level2 nav-leaf"><a href="#коллекции">Коллекции</a></li>
    <li class="level2 nav-leaf"><a href="#простые-блоки">Простые блоки</a></li>
    <li class="level2 nav-leaf"><a href="#простое-сопоставление">Простое сопоставление</a></li>
    <li class="level2 nav-leaf"><a href="#произвольные-выражения">Произвольные выражения</a></li>
  </ul>

  <p class="footer"><a href="https://github.com/artemkorsakov/scalabook/blob/master/docs/scala/metaprogramming/macros.md"><i class="icofont-laika edit" title="Edit">&#xef10;</i>Редактировать страницу</a></p>
</nav>


      <main class="content">

        <h1 id="макросы" class="title">Макросы</h1>
        <p><a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/inline">Встроенные методы</a> предоставляют элегантную технику метапрограммирования, 
        выполняя некоторые операции во время компиляции. 
        Однако иногда встраивания недостаточно, и нужны более мощные способы анализа и синтеза программ во время компиляции. 
        Макросы позволяют делать именно это: относиться к <strong>программам как к данным</strong> и манипулировать ими.</p>
        
        <h3 id="макросы-рассматривают-программы-как-значения" class="section"><a class="anchor-link left" href="#макросы-рассматривают-программы-как-значения"><i class="icofont-laika link">&#xef71;</i></a>Макросы рассматривают программы как значения</h3>
        <p>С помощью макроса программы можно рассматривать как значения, 
        что позволяет анализировать и генерировать их во время компиляции. 
        Выражение Scala с типом <code>T</code> представлено экземпляром типа <code>scala.quoted.Expr[T]</code>.</p>
        <p>Более детально о типе <code>Expr[T]</code>, а также различные способы анализа и построения экземпляров, 
        будут раскрыты в главах <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">Quoted Code</a> 
        и <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/reflection">Reflection</a>. 
        Пока достаточно знать, что макросы — это метапрограммы, которые манипулируют выражениями типа <code>Expr[T]</code>.</p>
        <p>Следующая реализация макроса просто печатает выражение предоставленного аргумента:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">inspectCode</span><span>(</span><span class="identifier">x</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Any</span><span>])(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Any</span><span>] =
  </span><span class="identifier">println</span><span>(</span><span class="identifier">x</span><span>.</span><span class="identifier">show</span><span>)
  </span><span class="identifier">x</span></code></pre>
        <p>После печати выражения аргумента исходный аргумент возвращается как выражение Scala типа <code>Expr[Any]</code>.</p>
        <p>Как уже упоминалось в разделе <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/inline">Inline</a>, 
        встроенные методы предоставляют точку входа для определений макросов:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">inspect</span><span>(</span><span class="identifier">inline</span><span> </span><span class="identifier">x</span><span>: </span><span class="type-name">Any</span><span>): </span><span class="type-name">Any</span><span> = </span><span class="identifier">$</span><span>{ </span><span class="identifier">inspectCode</span><span>(</span><span class="symbol-literal">&#39;x</span><span>) }</span></code></pre>
        <p>Все макросы определены с расширением <code>inline def</code>. 
        Реализация этой точки входа всегда имеет одинаковую форму:</p>
        <ul>
          <li>они содержат только одну <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">склейку</a> <code>${ ... }</code></li>
          <li>склейка содержит единственный вызов метода, реализующего макрос (например <code>inspectCode</code>).</li>
          <li>вызов реализации макроса получает параметры в кавычках (то есть <code>&#39;x</code> вместо <code>x</code>) и контекстное <code>Quotes</code>.</li>
        </ul>
        <p>Вызов <code>inspect</code> макроса <code>inspect(sys error &quot;abort&quot;)</code> выводит 
        строковое представление выражения аргумента во время компиляции:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">scala</span><span>.</span><span class="identifier">sys</span><span>.</span><span class="identifier">error</span><span>(</span><span class="string-literal">&quot;abort&quot;</span><span>)</span></code></pre>
        
        <h4 id="макросы-и-параметры-типа" class="section"><a class="anchor-link left" href="#макросы-и-параметры-типа"><i class="icofont-laika link">&#xef71;</i></a>Макросы и параметры типа</h4>
        <p>Если у макроса есть параметры типа, реализация также должна о них знать. 
        Точно так же, как <code>scala.quoted.Expr[T]</code> представляет выражение Scala типа <code>T</code>, 
        <code>scala.quoted.Type[T]</code> используется для представления типа Scala <code>T</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">logged</span><span>[</span><span class="type-name">T</span><span>](</span><span class="identifier">inline</span><span> </span><span class="identifier">x</span><span>: </span><span class="type-name">T</span><span>): </span><span class="type-name">T</span><span> = </span><span class="identifier">$</span><span>{ </span><span class="identifier">loggedCode</span><span>(</span><span class="symbol-literal">&#39;x</span><span>)  }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">loggedCode</span><span>[</span><span class="type-name">T</span><span>](</span><span class="identifier">x</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">T</span><span>])(</span><span class="keyword">using</span><span> </span><span class="type-name">Type</span><span>[</span><span class="type-name">T</span><span>], </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">T</span><span>] = ...</span></code></pre>
        <p>И экземпляр <code>Type[T]</code>, и контекст <code>Quotes</code> автоматически предоставляются склейкой 
        в соответствующем встроенном методе (то есть <code>logged</code>) и могут использоваться реализацией макроса.</p>
        
        <h4 id="определение-и-использование-макросов" class="section"><a class="anchor-link left" href="#определение-и-использование-макросов"><i class="icofont-laika link">&#xef71;</i></a>Определение и использование макросов</h4>
        <p>Ключевое различие между встраиванием и макросами заключается в способе их оценки. 
        Встраивание работает, переписывая код и выполняя оптимизацию на основе правил, известных компилятору. 
        С другой стороны, макрос выполняет написанный пользователем код, генерирующий код, до которого макрос расширяется.</p>
        <p>Технически компиляция встроенного кода <code>${ inspectCode(&#39;x) }</code> вызывает метод <code>inspectCode</code> 
        во время компиляции (через Java reflection), а затем метод <code>inspectCode</code> выполняется как обычный код.</p>
        <p>Чтобы иметь возможность выполнить <code>inspectCode</code>, нужно сначала скомпилировать его исходный код. 
        Как следствие, мы не можем определить и использовать макрос в одном и том же классе/файле. 
        Однако можно иметь определение макроса и его вызов в одном и том же проекте, 
        если реализация макроса может быть скомпилирована первой.</p>
        <blockquote>
          <p><strong>Приостановленные файлы</strong></p>
          <p>Чтобы разрешить определение и использование макросов в одном и том же проекте, 
          расширяются только те вызовы макросов, которые уже были скомпилированы. 
          Для всех остальных (неизвестных) вызовов макросов компиляция файла приостанавливается. 
          Приостановленные файлы компилируются только после успешной компиляции всех незаблокированных файлов. 
          В некоторых случаях будут циклические зависимости, которые будут блокировать завершение компиляции. 
          Чтобы получить больше информации о том, какие файлы приостановлены, 
          можно использовать флаг компилятора <code>-Xprint-suspension</code>.</p>
        </blockquote>
        
        <h4 id="пример-статическая-оценка-power-с-помощью-макросов" class="section"><a class="anchor-link left" href="#пример-статическая-оценка-power-с-помощью-макросов"><i class="icofont-laika link">&#xef71;</i></a>Пример: статическая оценка <code>power</code> с помощью макросов</h4>
        <p>Вспомним определение <code>power</code> из раздела <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/inline">Inline</a>, 
        которое специализировало вычисление <code>xⁿ</code> для статически известных значений <code>n</code>.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">power</span><span>(</span><span class="identifier">x</span><span>: </span><span class="type-name">Double</span><span>, </span><span class="identifier">inline</span><span> </span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Double</span><span> =
  </span><span class="keyword">inline</span><span> </span><span class="keyword">if</span><span> </span><span class="identifier">n</span><span> == </span><span class="number-literal">0</span><span> </span><span class="keyword">then</span><span> </span><span class="number-literal">1.0</span><span>
  </span><span class="keyword">else</span><span> </span><span class="keyword">inline</span><span> </span><span class="keyword">if</span><span> </span><span class="identifier">n</span><span> % </span><span class="number-literal">2</span><span> == </span><span class="number-literal">1</span><span> </span><span class="keyword">then</span><span> </span><span class="identifier">x</span><span> * </span><span class="identifier">power</span><span>(</span><span class="identifier">x</span><span>, </span><span class="identifier">n</span><span> - </span><span class="number-literal">1</span><span>)
  </span><span class="keyword">else</span><span> </span><span class="identifier">power</span><span>(</span><span class="identifier">x</span><span> * </span><span class="identifier">x</span><span>, </span><span class="identifier">n</span><span> / </span><span class="number-literal">2</span><span>)</span></code></pre>
        <p>В оставшейся части этого раздела будет определен макрос, 
        который вычисляет <code>xⁿ</code> для статически известных значений <code>x</code> и <code>n</code>. 
        Хотя это также возможно с помощью <code>inline</code>, 
        реализация с помощью макросов проиллюстрирует несколько вещей.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">power</span><span>(</span><span class="identifier">inline</span><span> </span><span class="identifier">x</span><span>: </span><span class="type-name">Double</span><span>, </span><span class="identifier">inline</span><span> </span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>) =
  </span><span class="identifier">$</span><span>{ </span><span class="identifier">powerCode</span><span>(</span><span class="symbol-literal">&#39;x</span><span>, </span><span class="symbol-literal">&#39;n</span><span>)  }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">powerCode</span><span>(
  </span><span class="identifier">x</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>],
  </span><span class="identifier">n</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Int</span><span>]
)(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>] = ...</span></code></pre>
        
        <h3 id="простые-выражения" class="section"><a class="anchor-link left" href="#простые-выражения"><i class="icofont-laika link">&#xef71;</i></a>Простые выражения</h3>
        <p><code>powerCode</code> можно было бы реализовать следующим образом:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">pow</span><span>(</span><span class="identifier">x</span><span>: </span><span class="type-name">Double</span><span>, </span><span class="identifier">n</span><span>: </span><span class="type-name">Int</span><span>): </span><span class="type-name">Double</span><span> =
  </span><span class="keyword">if</span><span> </span><span class="identifier">n</span><span> == </span><span class="number-literal">0</span><span> </span><span class="keyword">then</span><span> </span><span class="number-literal">1</span><span> </span><span class="keyword">else</span><span> </span><span class="identifier">x</span><span> * </span><span class="identifier">pow</span><span>(</span><span class="identifier">x</span><span>, </span><span class="identifier">n</span><span> - </span><span class="number-literal">1</span><span>)

</span><span class="keyword">def</span><span> </span><span class="declaration-name">powerCode</span><span>(
  </span><span class="identifier">x</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>],
  </span><span class="identifier">n</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Int</span><span>]
)(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>] =
  </span><span class="keyword">val</span><span> </span><span class="identifier">value</span><span>: </span><span class="type-name">Double</span><span> = </span><span class="identifier">pow</span><span>(</span><span class="identifier">x</span><span>.</span><span class="identifier">valueOrError</span><span>, </span><span class="identifier">n</span><span>.</span><span class="identifier">valueOrError</span><span>)
  </span><span class="type-name">Expr</span><span>(</span><span class="identifier">value</span><span>)</span></code></pre>
        <p>Здесь операция <code>pow</code> представляет собой простую функцию Scala, которая вычисляет значение <code>xⁿ</code>. 
        Интересная часть заключается в том, как мы создаем и изучаем <code>Expr</code>-ы.</p>
        
        <h4 id="создание-выражений-из-значений" class="section"><a class="anchor-link left" href="#создание-выражений-из-значений"><i class="icofont-laika link">&#xef71;</i></a>Создание выражений из значений</h4>
        <p>Давайте сначала посмотрим <code>Expr.apply(value)</code>. 
        Учитывая значение типа <code>T</code>, этот вызов вернет выражение, содержащее код, 
        представляющий данное значение (то есть типа <code>Expr[T]</code>). 
        Значение аргумента <code>Expr</code> вычисляется во время компиляции, 
        во время выполнения нужно только создать экземпляр этого значения.</p>
        <p>Создание выражений из значений работает для всех примитивных типов, кортежей любой арности, 
        <code>Class</code>, <code>Array</code>, <code>Seq</code>, <code>Set</code>, <code>List</code>, <code>Map</code>, <code>Option</code>, <code>Either</code>, <code>BigInt</code>, <code>BigDecimal</code>, <code>StringContext</code>. 
        Другие типы также могут работать, если для них реализован <code>ToExpr</code>, 
        <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">как будет показано позже</a>.</p>
        
        <h4 id="извлечение-значений-из-выражений" class="section"><a class="anchor-link left" href="#извлечение-значений-из-выражений"><i class="icofont-laika link">&#xef71;</i></a>Извлечение значений из выражений</h4>
        <p>Второй метод, который используется при реализации <code>powerCode</code> - это <code>Expr[T].valueOrError</code>, 
        имеющий эффект, противоположный <code>Expr.apply</code>. 
        Он пытается извлечь значение типа <code>T</code> из выражения типа <code>Expr[T]</code>. 
        Это может быть успешным только в том случае, если выражение непосредственно содержит код значения, 
        в противном случае будет выдано исключение, которое остановит раскрытие макроса и сообщит, 
        что выражение не соответствует значению.</p>
        <p>Вместо <code>valueOrError</code>, можно было бы также использовать операцию <code>value</code>, которая вернет <code>Option</code>. 
        Таким образом, можно сообщить об ошибке с помощью пользовательского сообщения.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  ...
  (</span><span class="identifier">x</span><span>.</span><span class="identifier">value</span><span>, </span><span class="identifier">n</span><span>.</span><span class="identifier">value</span><span>) </span><span class="keyword">match</span><span>
    </span><span class="keyword">case</span><span> (</span><span class="type-name">Some</span><span>(</span><span class="identifier">base</span><span>), </span><span class="type-name">Some</span><span>(</span><span class="identifier">exponent</span><span>)) =&gt;
      </span><span class="identifier">pow</span><span>(</span><span class="identifier">base</span><span>, </span><span class="identifier">exponent</span><span>)
    </span><span class="keyword">case</span><span> (</span><span class="type-name">Some</span><span>(</span><span class="identifier">_</span><span>), </span><span class="identifier">_</span><span>) =&gt;
      </span><span class="identifier">report</span><span>.</span><span class="identifier">error</span><span>(</span><span class="string-literal">&quot;Expected a known value for the exponent, but was &quot;</span><span> + </span><span class="identifier">n</span><span>.</span><span class="identifier">show</span><span>, </span><span class="identifier">n</span><span>)
    </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt;
      </span><span class="identifier">report</span><span>.</span><span class="identifier">error</span><span>(</span><span class="string-literal">&quot;Expected a known value for the base, but was &quot;</span><span> + </span><span class="identifier">x</span><span>.</span><span class="identifier">show</span><span>, </span><span class="identifier">x</span><span>)</span></code></pre>
        <p>Кроме того, также можно использовать экстрактор <code>Expr.unapply</code>:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span>  ...
  (</span><span class="identifier">x</span><span>, </span><span class="identifier">n</span><span>) </span><span class="keyword">match</span><span>
    </span><span class="keyword">case</span><span> (</span><span class="type-name">Expr</span><span>(</span><span class="identifier">base</span><span>), </span><span class="type-name">Expr</span><span>(</span><span class="identifier">exponent</span><span>)) =&gt;
      </span><span class="identifier">pow</span><span>(</span><span class="identifier">base</span><span>, </span><span class="identifier">exponent</span><span>)
    </span><span class="keyword">case</span><span> (</span><span class="type-name">Expr</span><span>(</span><span class="identifier">_</span><span>), </span><span class="identifier">_</span><span>) =&gt; ...
    </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt; ...</span></code></pre>
        <p>Операции <code>value</code>, <code>valueOrError</code> и <code>Expr.unapply</code> будут работать для всех примитивных типов, кортежей любой арности, 
        <code>Option</code>, <code>Seq</code>, <code>Set</code>, <code>Map</code>, <code>Either</code> и <code>StringContext</code>. 
        Другие типы также могут работать, если для них реализован FromExpr, 
        <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">как будет показано позже</a>.</p>
        
        <h4 id="отображение-выражений" class="section"><a class="anchor-link left" href="#отображение-выражений"><i class="icofont-laika link">&#xef71;</i></a>Отображение выражений</h4>
        <p>В реализации <code>inspectCode</code> было видно, как преобразовать выражения 
        в строковое представление исходного кода с помощью метода <code>.show</code>. 
        Это может быть полезно для отладки реализации макросов:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">debugPowerCode</span><span>(
  </span><span class="identifier">x</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>],
  </span><span class="identifier">n</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Int</span><span>]
)(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Double</span><span>] =
  </span><span class="identifier">println</span><span>(
    </span><span class="string-literal">s&quot;&quot;&quot;powerCode
       |  x := </span><span class="substitution">${x.show}</span><span class="string-literal">
       |  n := </span><span class="substitution">${n.show}</span><span class="string-literal">&quot;&quot;&quot;</span><span>.</span><span class="identifier">stripMargin</span><span>)
  </span><span class="keyword">val</span><span> </span><span class="identifier">code</span><span> = </span><span class="identifier">powerCode</span><span>(</span><span class="identifier">x</span><span>, </span><span class="identifier">n</span><span>)
  </span><span class="identifier">println</span><span>(</span><span class="string-literal">s&quot;  code := </span><span class="substitution">${code.show}</span><span class="string-literal">&quot;</span><span>)
  </span><span class="identifier">code</span></code></pre>
        
        <h4 id="работа-с-переменными-аргументами" class="section"><a class="anchor-link left" href="#работа-с-переменными-аргументами"><i class="icofont-laika link">&#xef71;</i></a>Работа с переменными аргументами</h4>
        <p>Переменные аргументы в Scala представлены с помощью <code>Seq</code>, 
        поэтому, когда пишется макрос с переменным аргументом, он будет передан как <code>Expr[Seq[T]]</code>. 
        Можно восстановить каждый отдельный аргумент (типа <code>Expr[T]</code>) с помощью экстрактора <code>scala.quoted.Varargs</code>.</p>
        <pre><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">scala</span><span>.</span><span class="identifier">quoted</span><span>.</span><span class="type-name">Varargs</span><span>

</span><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">sumNow</span><span>(</span><span class="identifier">inline</span><span> </span><span class="identifier">nums</span><span>: </span><span class="type-name">Int</span><span>*): </span><span class="type-name">Int</span><span> =
  </span><span class="identifier">$</span><span>{ </span><span class="identifier">sumCode</span><span>(</span><span class="symbol-literal">&#39;nums</span><span>)  }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">sumCode</span><span>(</span><span class="identifier">nums</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Seq</span><span>[</span><span class="type-name">Int</span><span>]])(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>): </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Int</span><span>] =
  </span><span class="identifier">nums</span><span> </span><span class="keyword">match</span><span>
    </span><span class="keyword">case</span><span>  </span><span class="type-name">Varargs</span><span>(</span><span class="identifier">numberExprs</span><span>) =&gt; </span><span class="comment">// numberExprs: Seq[Expr[Int]]
</span><span>      </span><span class="keyword">val</span><span> </span><span class="identifier">numbers</span><span>: </span><span class="type-name">Seq</span><span>[</span><span class="type-name">Int</span><span>] = </span><span class="identifier">numberExprs</span><span>.</span><span class="identifier">map</span><span>(</span><span class="identifier">_</span><span>.</span><span class="identifier">valueOrError</span><span>)
      </span><span class="type-name">Expr</span><span>(</span><span class="identifier">numbers</span><span>.</span><span class="identifier">sum</span><span>)
    </span><span class="keyword">case</span><span> </span><span class="identifier">_</span><span> =&gt; </span><span class="identifier">report</span><span>.</span><span class="identifier">error</span><span>(
      </span><span class="string-literal">&quot;Expected explicit argument&quot;</span><span> +
      </span><span class="string-literal">&quot;Notation `args: _*` is not supported.&quot;</span><span>, </span><span class="identifier">numbersExpr</span><span>)</span></code></pre>
        <p>Экстрактор сопоставит вызов <code>sumNow(1, 2, 3)</code> и извлечет <code>Seq[Expr[Int]]</code>, содержащий код каждого параметра. 
        Но если попытаться сопоставить аргумент вызова <code>sumNow(nums: _*)</code>, экстрактор не совпадет.</p>
        <p><code>Varargs</code> также может быть использован в качестве конструктора. 
        <code>Varargs(Expr(1), Expr(2), Expr(3))</code> вернет <code>Expr[Seq[Int]]</code>.</p>
        
        <h3 id="сложные-выражения" class="section"><a class="anchor-link left" href="#сложные-выражения"><i class="icofont-laika link">&#xef71;</i></a>Сложные выражения</h3>
        <p>Было показано, как создавать и распаковывать выражения, соответствующие простым значениям. 
        Для работы с более сложными выражениями Scala предлагает различные средства метапрограммирования, начиная от</p>
        <ul>
          <li>дополнительные конструкторы, такие как <code>Expr.apply</code>,</li>
          <li><a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">сопоставление с образцом в цитатах</a>,</li>
          <li><a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/reflection">reflection API</a>;</li>
        </ul>
        <p>каждый из них усложняется и потенциально теряет гарантии безопасности. 
        Обычно рекомендуется чаще использовать простые API. 
        В оставшейся части этого раздела вводятся еще несколько дополнительных конструкторов и деструкторов, 
        а в последующих главах представлены более продвинутые API.</p>
        
        <h4 id="коллекции" class="section"><a class="anchor-link left" href="#коллекции"><i class="icofont-laika link">&#xef71;</i></a>Коллекции</h4>
        <p>Было показано, как преобразовать <code>List[Int]</code> в <code>Expr[List[Int]]</code> используя <code>Expr.apply</code>. 
        Как насчет преобразования <code>List[Expr[Int]]</code> в <code>Expr[List[Int]]</code>? 
        Упоминалось, что <code>Varargs.apply</code> может сделать это для последовательностей; 
        аналогично, для других типов коллекций доступны соответствующие методы:</p>
        <ul>
          <li><code>Expr.ofList</code>: преобразует <code>List[Expr[T]]</code> в <code>Expr[List[T]]</code></li>
          <li><code>Expr.ofSeq</code>: преобразует <code>Seq[Expr[T]]</code> в <code>Expr[Seq[T]]</code> (так же, как Varargs)</li>
          <li><code>Expr.ofTupleFromSeq</code>: преобразует <code>Seq[Expr[T]]</code> в <code>Expr[Tuple]</code></li>
          <li><code>Expr.ofTuple</code>: преобразует <code>(Expr[T1], ..., Expr[Tn])</code> в <code>Expr[(T1, ..., Tn)]</code></li>
        </ul>
        
        <h4 id="простые-блоки" class="section"><a class="anchor-link left" href="#простые-блоки"><i class="icofont-laika link">&#xef71;</i></a>Простые блоки</h4>
        <p>Конструктор <code>Expr.block</code> предоставляет простой способ создания блока кода <code>{ stat1; ...; statn; expr }</code>. 
        Его первые аргументы — это список со всеми операторами, а второй аргумент — выражение в конце блока.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">test</span><span>(</span><span class="identifier">inline</span><span> </span><span class="identifier">ignore</span><span>: </span><span class="type-name">Boolean</span><span>, </span><span class="identifier">computation</span><span>: =&gt; </span><span class="type-name">Unit</span><span>): </span><span class="type-name">Boolean</span><span> =
  </span><span class="identifier">$</span><span>{ </span><span class="identifier">testCode</span><span>(</span><span class="symbol-literal">&#39;ignore</span><span>, </span><span class="symbol-literal">&#39;computation</span><span>) }

</span><span class="keyword">def</span><span> </span><span class="declaration-name">testCode</span><span>(</span><span class="identifier">ignore</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Boolean</span><span>], </span><span class="identifier">computation</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Unit</span><span>])(</span><span class="keyword">using</span><span> </span><span class="type-name">Quotes</span><span>) =
  </span><span class="keyword">if</span><span> </span><span class="identifier">ignore</span><span>.</span><span class="identifier">valueOrError</span><span> </span><span class="keyword">then</span><span> </span><span class="type-name">Expr</span><span>(</span><span class="boolean-literal">false</span><span>)
  </span><span class="keyword">else</span><span> </span><span class="type-name">Expr</span><span>.</span><span class="identifier">block</span><span>(</span><span class="type-name">List</span><span>(</span><span class="identifier">computation</span><span>), </span><span class="type-name">Expr</span><span>(</span><span class="boolean-literal">true</span><span>))</span></code></pre>
        <p>Конструктор <code>Expr.block</code> полезен, когда необходимо сгенерировать код, содержащий несколько побочных эффектов. 
        Вызов макроса <code>test(false, EXPRESSION)</code> будет генерировать <code>{ EXPRESSION; true}</code>, 
        в то время как вызов <code>test(true, EXPRESSION)</code> приведет к <code>false</code>.</p>
        
        <h4 id="простое-сопоставление" class="section"><a class="anchor-link left" href="#простое-сопоставление"><i class="icofont-laika link">&#xef71;</i></a>Простое сопоставление</h4>
        <p>Этот метод <code>Expr.matches</code> можно использовать для проверки равенства одного выражения другому. 
        С помощью этого метода можно было бы реализовать <code>value</code> операцию <code>Expr[Boolean]</code> следующим образом:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">def</span><span> </span><span class="declaration-name">value</span><span>(</span><span class="identifier">boolExpr</span><span>: </span><span class="type-name">Expr</span><span>[</span><span class="type-name">Boolean</span><span>]): </span><span class="type-name">Option</span><span>[</span><span class="type-name">Boolean</span><span>] =
  </span><span class="keyword">if</span><span> </span><span class="identifier">boolExpr</span><span>.</span><span class="identifier">matches</span><span>(</span><span class="type-name">Expr</span><span>(</span><span class="boolean-literal">true</span><span>)) </span><span class="keyword">then</span><span> </span><span class="type-name">Some</span><span>(</span><span class="boolean-literal">true</span><span>)
  </span><span class="keyword">else</span><span> </span><span class="keyword">if</span><span> </span><span class="identifier">boolExpr</span><span>.</span><span class="identifier">matches</span><span>(</span><span class="type-name">Expr</span><span>(</span><span class="boolean-literal">false</span><span>)) </span><span class="keyword">then</span><span> </span><span class="type-name">Some</span><span>(</span><span class="boolean-literal">false</span><span>)
  </span><span class="keyword">else</span><span> </span><span class="type-name">None</span></code></pre>
        <p>Его также можно использовать для сравнения двух написанных пользователем выражений. 
        Обратите внимание, что <code>matches</code> выполняется только ограниченная нормализация, 
        и хотя, например, Scala выражение <code>2</code> соответствует выражению <code>{ 2 }</code>, 
        это не относится к выражению <code>{ val x: Int = 2; x }</code>.</p>
        
        <h4 id="произвольные-выражения" class="section"><a class="anchor-link left" href="#произвольные-выражения"><i class="icofont-laika link">&#xef71;</i></a>Произвольные выражения</h4>
        <p>Можно создать произвольный код Scala <code>Expr[T]</code>, заключив его <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">в цитаты</a>. 
        Например, <code>&#39;{ ${expr}; true }</code> сгенерирует <code>Expr[Int]</code> эквивалент <code>Expr.block(List(expr), Expr(true))</code>. 
        В следующем разделе, посвященном <a href="https://scalabook.gitflic.space/docs/scala/metaprogramming/quoted-code">Quoted Code</a>, цитаты представлены более подробно.</p>
        <hr>
        <p><strong>Ссылки:</strong></p>
        <ul>
          <li><a href="https://docs.scala-lang.org/scala3/guides/macros/macros.html">Scala 3 Guide</a></li>
          <li><a href="https://docs.scala-lang.org/scala3/reference/metaprogramming/macros.html">Scala 3 Reference</a></li>
        </ul>

        
<hr class="footer-rule"/>
<footer>
  
</footer>


      </main>

    </div>

  </body>

</html>